<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Suivi Financier Travaux</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/js/all.min.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="style.css">
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
</head>
<body>

<header class="app-header">
    <i class="fas fa-home"></i>
    <h1>Suivi Financier : Travaux Maison Musson</h1>
</header>

<main class="container">

    <section class="project-tracker">
        <div class="tracker-header">
            <h2>üìä Avancement Global du Budget</h2>
            <p>Objectif de Fin : 01/03/2026</p>
        </div>

        <div id="progress-tracker" class="progress-bar-container">
            <p>0% Atteint</p>
            <span>Total D√©pens√©: 0 ‚Ç¨</span>
            <div class="progress-bar-bg">
                <div id="overall-progress" class="progress-bar" style="width: 0;"></div>
            </div>
        </div>
    </section>

    <section class="dashboard-totals">
        <div class="stat-card category-card" data-type="Outillage">
            <p>Outillage - D√©pens√©</p>
            <strong id="outillage">0 ‚Ç¨</strong>
            <p class="budget-target">Budget Cible : <span id="outillage-budget">0 ‚Ç¨</span></p>
        </div>
        <div class="stat-card category-card" data-type="Prestations">
            <p>Prestations - D√©pens√©</p>
            <strong id="prestations">0 ‚Ç¨</strong>
            <p class="budget-target">Budget Cible : <span id="prestations-budget">0 ‚Ç¨</span></p>
        </div>
        <div class="stat-card category-card" data-type="Grosses d√©penses">
            <p>Grosses d√©penses - D√©pens√©</p>
            <strong id="grosses">0 ‚Ç¨</strong>
            <p class="budget-target">Budget Cible : <span id="grosses-budget">0 ‚Ç¨</span></p>
        </div>

        <div class="stat-card total-summary total-paid">
            <p>Total D√©j√† Pay√©</p>
            <strong id="total-paid">0 ‚Ç¨</strong>
            <p class="budget-target">Budget Global : <span id="total-budget">0 ‚Ç¨</span></p>
        </div>
        <div class="stat-card total-summary total-pending">
            <p>Reste √† Payer (Fournisseur)</p>
            <strong id="total-pending">0 ‚Ç¨</strong>
        </div>
    </section>

    <section class="form-section">
        <fieldset>
            <legend>Ajouter une Nouvelle D√©pense</legend>
            <form id="expense-form" class="modern-form">

                <div class="form-group"><label for="date">Date</label><input type="date" id="date" name="date" required></div>

                <div class="form-group">
                    <label for="type">Type de D√©pense</label>
                    <select id="type" name="type" required>
                        <option value="Outillage">Outillage</option>
                        <option value="Prestations">Prestations</option>
                        <option value="Grosses d√©penses">Grosses d√©penses</option>
                    </select>
                </div>

                <div class="form-group"><label for="category">Cat√©gorie</label><input placeholder="Plomberie, √âlectricit√©..." id="category" name="category" required></div>
                <div class="form-group"><label for="description">Description</label><input placeholder="D√©tails de l'achat/prestation" id="description" name="description" required></div>
                <div class="form-group"><label for="recipient">B√©n√©ficiaire</label><input placeholder="Nom du fournisseur" id="recipient" name="recipient" required></div>

                <div class="form-group"><label for="amount">Montant (‚Ç¨)</label><input type="number" min="0.01" step="0.01" placeholder="Montant ‚Ç¨" id="amount" name="amount" required></div>

                <div class="form-group">
                    <label for="paidBy">Pay√© par</label>
                    <select id="paidBy" name="paidBy" required>
                        <option value="Kimberley" selected>Kimberley</option>
                        <option value="Simo">Simo</option>
                        <option value="Tony">Tony</option>
                        <option value="Maman">Maman</option>
                        <option value="Quertain">Quertain</option>
                        <option value="Gabi">Gabi</option>
                        <option value="Autre">Autre</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="reimbursementStatus">Remboursement</label>
                    <select id="reimbursementStatus" name="reimbursementStatus">
                        <option value="N/A" selected>N/A (Pay√© par moi-Kimberley)</option>
                        <option value="A rembourser">A Rembourser</option>
                        <option value="Rembours√©">Rembours√©</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="status">Statut (Fournisseur)</label>
                    <select id="status" name="status" required>
                        <option value="Acompte">Acompte</option>
                        <option value="Total">Total</option>
                        <option value="Pay√©" selected>Pay√©</option>
                        <option value="En attente">En attente</option>
                    </select>
                </div>

                <div class="form-group"><label for="dueDate">√âch√©ance</label><input type="date" id="dueDate" name="dueDate"></div>

                <button type="submit" id="add-expense-btn" class="submit-btn full-width">
                    <i class="fas fa-plus"></i> Ajouter la D√©pense
                </button>
            </form>
        </fieldset>
    </section>

    <div id="toast-container"></div>

    <section class="list-section">
        <h2>D√©penses Enregistr√©es</h2>
        <div id="cards-container" class="expense-grid">
        </div>
    </section>

    <section class="task-management">

        <fieldset>
            <legend>Ajouter une T√¢che de Travaux</legend>
            <form id="task-form" class="modern-form task-form-grid">

                <div class="form-group">
                    <label for="task-location">Pi√®ce/Localisation</label>
                    <select id="task-location" name="location" required>
                        <option value="" selected disabled>Choisir la pi√®ce</option>
                        <option value="Cuisine">Cuisine</option>
                        <option value="Salon">Salon</option>
                        <option value="Sale A manger ">Sale A manger</option>
                        <option value="Chambre Kimberley">Chambre Kimberley</option>
                        <option value="Chambre Maissane">Chambre Maissane</option>
                        <option value="RDC">RDC</option>
                        <option value="Ext√©rieur">Ext√©rieur</option>
                        <option value="Jardin">Jardin</option>
                        <option value="Divers">Divers</option>
                    </select>
                </div>

                <div class="form-group"><label for="task-name">Nom de la T√¢che</label><input placeholder="Ex: Peinture Salon" id="task-name" name="name" required></div>

                <div class="form-group">
                    <label for="task-priority">Priorit√©</label>
                    <select id="task-priority" name="priority" required>
                        <option value="Moyenne" selected>Moyenne</option>
                        <option value="Haute">Haute</option>
                        <option value="Basse">Basse</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="task-responsible">Responsable</label>
                    <select id="task-responsible" name="responsible" required>
                        <option value="Kimberley" selected>Kimberley</option>
                        <option value="Simo">Simo</option>
                        <option value="Tony">Tony</option>
                        <option value="Maman">Maman</option>
                        <option value="Quertain">Quertain</option>
                        <option value="Gabi">Gabi</option>
                        <option value="Artisan">Artisan</option>
                        <option value="Autre">Autre</option>
                    </select>
                </div>

                <div class="form-group"><label for="task-estimatedCost">Co√ªt Estim√© (‚Ç¨)</label><input type="number" min="0" step="0.01" placeholder="Optionnel" id="task-estimatedCost" name="estimatedCost"></div>

                <div class="form-group"><label for="task-taskDueDate">√âch√©ance T√¢che</label><input type="date" id="task-taskDueDate" name="taskDueDate"></div>

                <button type="submit" id="add-task-btn" class="submit-btn task-btn" style="grid-column: span 2;">
                    <i class="fas fa-check-double"></i> Ajouter la T√¢che
                </button>
            </form>
        </fieldset>

        <h2 style="margin-top: 30px;">Avancement Physique des Travaux</h2>

        <div class="progress-bar-container">
            <p id="overall-task-progress">0% (0 / 0 T√¢ches Termin√©es)</p>
            <div class="progress-bar-bg">
                <div id="task-progress-bar" class="progress-bar task-progress" style="width: 0;"></div>
            </div>
        </div>

        <div id="tasks-container" class="task-list-grid">
        </div>
    </section>

</main>

<script src="app.js" defer></script>
</body>
</html>